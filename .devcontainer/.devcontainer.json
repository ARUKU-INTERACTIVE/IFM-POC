{
  "name": "Algorand Quick Start Dev",
  "image": "mcr.microsoft.com/devcontainers/javascript-node:1-20-bullseye",
  "features": { "ghcr.io/devcontainers/features/python:1": { "version": "3.12" } },

  "containerEnv": {
    "NODE_ENV": "development",
    "PLAYWRIGHT_SKIP_BROWSER_DOWNLOAD": "1"
  },
  "remoteEnv": {
    "PATH": "${containerEnv:PATH}:/home/codespace/.local/bin"
  },

  "forwardPorts": [4001, 4002, 8980, 5173, 3001],
  "portsAttributes": {
    "5173": { "label": "Vite", "onAutoForward": "openBrowser", "visibility": "public" }
  },

  "customizations": {
    "vscode": {
      "extensions": ["dbaeumer.vscode-eslint", "esbenp.prettier-vscode"],
      "settings": {
        "terminal.integrated.defaultProfile.linux": "bash",
        "task.allowAutomaticTasks": "on"
      }
    }
  },

  "postCreateCommand": "bash -lc '.devcontainer/setup.sh'",

  // Start the dev server whenever the container starts (works even before the editor attaches)
  "postStartCommand": "bash -lc 'echo POST_START_RAN && cd QuickStartTemplate/projects/QuickStartTemplate-frontend && npm run dev:fast'",

  // Optional: also run it when the editor attaches (prints a breadcrumb so you can see it fired)
  "postAttachCommand": "bash -lc 'echo POST_ATTACH_RAN'"
}
